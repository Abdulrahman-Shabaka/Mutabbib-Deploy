"use strict";(self.webpackChunkdemo2=self.webpackChunkdemo2||[]).push([[90],{3090:(Ee,D,r)=>{r.r(D),r.d(D,{DashboardModule:()=>ye});var g=r(6814),N=r(7304),T=r(5861),e=r(5879),F=r(7234),k=r(6901);let B=(()=>{class o{templateRef;viewContainer;permissionManager;constructor(t,i,n){this.templateRef=t,this.viewContainer=i,this.permissionManager=n}set appIsNotGranted(t){this.isNotGranted(F.G[t])}isNotGranted(t){this.permissionManager.isNotGranted(t)?this.viewContainer.createEmbeddedView(this.templateRef):this.viewContainer.clear()}static \u0275fac=function(i){return new(i||o)(e.Y36(e.Rgc),e.Y36(e.s_b),e.Y36(k.v))};static \u0275dir=e.lG2({type:o,selectors:[["","appIsNotGranted",""]],inputs:{appIsNotGranted:"appIsNotGranted"}})}return o})();var Q=r(1932),f=r(6663),v=r(3912);const G=["modal"],z=function(){return["/dashboard/Issues"]},q=function(){return["/dashboard/Events"]},P=function(){return["/dashboard/Notification"]};function R(o,l){1&o&&(e.TgZ(0,"div",5)(1,"div",6),e._UZ(2,"h2",7),e.TgZ(3,"div"),e.O4$(),e.TgZ(4,"svg",8)(5,"defs",9)(6,"linearGradient",10),e._UZ(7,"stop",11)(8,"stop",12),e.qZA(),e._UZ(9,"linearGradient",13)(10,"linearGradient",14),e.qZA(),e._UZ(11,"path",15)(12,"use",16)(13,"use",17),e.TgZ(14,"g",18),e._UZ(15,"path",19)(16,"path",20)(17,"path",21),e.qZA()()()(),e.kcU(),e.TgZ(18,"div",6),e._UZ(19,"h2",22),e.TgZ(20,"div"),e._UZ(21,"img",23),e.qZA()(),e.TgZ(22,"div",6),e._UZ(23,"h2",24),e.TgZ(24,"div"),e._UZ(25,"img",25),e.qZA()()()),2&o&&(e.xp6(1),e.Q6J("routerLink",e.DdM(3,z)),e.xp6(17),e.Q6J("routerLink",e.DdM(4,q)),e.xp6(4),e.Q6J("routerLink",e.DdM(5,P)))}function Y(o,l){1&o&&e._UZ(0,"div")}let H=(()=>{class o{modalConfig={modalTitle:"Modal title",dismissButtonLabel:"Submit",closeButtonLabel:"Cancel"};modalComponent;constructor(){}openModal(){var t=this;return(0,T.Z)(function*(){return yield t.modalComponent.open()})()}static \u0275fac=function(i){return new(i||o)};static \u0275cmp=e.Xpm({type:o,selectors:[["app-dashboard"]],viewQuery:function(i,n){if(1&i&&e.Gf(G,5),2&i){let a;e.iGM(a=e.CRH())&&(n.modalComponent=a.first)}},decls:5,vars:3,consts:[[3,"value"],["class","card-container",4,"appIsNotGranted"],[4,"appIsGranted"],[2,"display","flex","justify-content","center","align-items","center","height","40vh"],["src","../../../assets/logo/png 1.svg","width","100","alt","Logo"],[1,"card-container"],[1,"card",3,"routerLink"],["translate","Support.IssueList"],["version","1.0","x","0","y","0","width","90.0000000","height","90.0000000","id","svg604",0,"sodipodi","version","0.32",0,"sodipodi","docname","document-multiple.svg",0,"sodipodi","docbase","/home/zeus/.icons/gartoon/scalable/mimetypes",0,"inkscape","version","0.46+devel",0,"inkscape","output_extension","org.inkscape.output.svg.inkscape"],["id","defs606"],["id","linearGradient612"],["offset","0","id","stop613",2,"stop-color","#7fa8e3","stop-opacity","0.7412"],["offset","1","id","stop614",2,"stop-color","#ffffff","stop-opacity","0"],["x1","50.64389","y1","5.367929","x2","35.75209","y2","68.04436","id","linearGradient615",0,"xlink","href","#linearGradient612","gradientUnits","userSpaceOnUse","spreadMethod","pad"],[0,"inkscape","collect","always",0,"xlink","href","#linearGradient612","id","linearGradient3344","gradientUnits","userSpaceOnUse","gradientTransform","matrix(0.7549355,0,0,0.7549355,2.6238617,3.0536519)","spreadMethod","pad","x1","50.64389","y1","5.367929","x2","35.75209","y2","68.04436"],["d","M 28.901219,5.2400511 C 26.964404,5.3305925 25.41281,5.9893727 24.218124,7.0646329 21.159522,8.9762164 7.4059091,49.520707 6.6413191,54.108435 5.1120438,58.313971 7.974847,61.36322 10.077615,62.319053 10.60919,62.43296 13.017456,62.940644 15.490541,63.474622 14.057667,67.618795 16.87437,70.647215 18.957247,71.594012 19.405189,71.689996 21.639386,72.160797 23.518701,72.567122 22.252939,76.601598 25.029519,79.512697 27.076636,80.443234 29.75287,81.016699 63.007671,88.310621 66.639652,88.501803 70.271721,88.692987 72.473909,85.430601 73.238557,82.75437 73.429655,80.269234 84.781198,41.657915 85.736943,39.937516 87.075059,36.592224 85.754482,35.354469 84.033999,33.825168 83.565472,33.408707 80.966505,32.514501 77.495915,31.453211 77.550433,31.315714 77.615975,31.115465 77.647962,31.057884 78.98608,27.712592 77.635096,26.474837 75.914611,24.945535 75.410357,24.49732 72.441561,23.502244 68.555463,22.330302 68.642547,22.098805 68.723973,21.862775 68.768331,21.782927 70.106448,18.437634 68.75546,17.199878 67.034979,15.670577 65.314578,14.141363 36.073767,6.4912483 32.824069,5.7266063 31.354534,5.3323374 30.063307,5.1857264 28.901219,5.2400511 z","id","path2532",2,"font-size","12px","fill","#000000","fill-opacity","0.29411765","fill-rule","evenodd","stroke-width","1"],["x","0","y","0",0,"xlink","href","#g2503","id","use2512","transform","translate(16.985198,18.143281)","width","90","height","90"],["x","0","y","0",0,"xlink","href","#g2503","id","use2510","transform","translate(8.8786264,9.2646535)","width","90","height","90"],["id","g2503","transform","matrix(0.9731104,0,0,0.9731104,-0.688172,-1.9162805)"],["id","path609","d","M 7.892117,62.435625 C 5.7312441,61.453377 2.7846535,58.310346 4.3561868,53.9886 5.1419046,49.274098 19.285705,7.6284677 22.428825,5.6640621 c 1.964317,-1.7679562 4.812825,-2.4555204 8.83987,-1.375084 3.339498,0.7857712 33.394984,8.6434829 35.162923,10.214954 1.768027,1.57156 3.14312,2.848419 1.768027,6.286151 C 67.217487,22.558022 55.529109,62.239157 55.332731,64.792965 54.546951,67.54315 52.287933,70.882649 48.5555,70.686182 44.823156,70.489714 10.642303,63.024937 7.892117,62.435625 z",2,"font-size","12px","fill","#3d4e67","fill-rule","evenodd","stroke-width","1"],["id","path608","d","M 12.41033,59.096126 C 10.151312,58.506813 6.9098697,57.917412 8.0885842,54.381535 10.249457,45.738132 21.2502,12.539526 25.964702,8.4142477 c 1.080481,-0.9822472 4.714591,-1.3750928 11.590055,0.78578 7.857712,2.3572513 23.769424,7.6611553 25.340984,8.4469353 1.571471,0.78578 2.160873,0.78578 0.982158,4.321746 -1.767938,3.535965 -9.62556,33.787919 -11.590055,38.895356 -1.375004,3.634199 -1.669705,5.303904 -4.027045,5.303904",2,"font-size","12px","fill","#ffffff","fill-rule","evenodd","stroke-width","1"],["id","path636","d","m 24.328257,13.434015 c 0,0 2.3591734,-4.7183846 8.257107,-3.3028806 5.897934,1.4155416 29.017834,7.5493926 28.781916,9.4367316 -0.235917,1.887339 -4.482429,12.975454 -4.718347,13.919123 -0.235917,0.94367 -21.940313,0.471835 -30.19742,5.426099 -8.257107,4.954264 -14.390958,9.200777 -14.390958,9.200777 0,0 8.4930244,-26.422743 12.267702,-34.67985 z",2,"font-size","12px","fill","url(#linearGradient3344)","fill-rule","evenodd","stroke-width","1"],["translate","event.eventlist"],["src","../../../assets/media/event.png",2,"width","88px"],["translate","notification.notificationList"],["src","../../../assets/media/notification-alert.png",2,"width","88px"]],template:function(i,n){1&i&&(e._UZ(0,"app-page-header",0),e.YNc(1,R,26,6,"div",1),e.YNc(2,Y,1,0,"div",2),e.TgZ(3,"div",3),e._UZ(4,"img",4),e.qZA()),2&i&&(e.Q6J("value","MENU.DASHBOARD"),e.xp6(1),e.Q6J("appIsNotGranted","Organization"),e.xp6(1),e.Q6J("appIsGranted","Organization"))},dependencies:[B,Q.J,N.rH,f.Pi,v.q],styles:[".card-container[_ngcontent-%COMP%]{display:flex;gap:20px}.card[_ngcontent-%COMP%]{background-color:#fff;border-radius:15px;box-shadow:0 8px 16px #0003;padding:20px;text-align:center;transition:transform .3s ease-in-out,box-shadow .3s ease-in-out;width:200px;cursor:pointer;border:2px solid #e0e0e0}.card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 10px;font-size:1.5em;color:#333}.card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:1em;color:#777}.card[_ngcontent-%COMP%]:hover{transform:translateY(-10px) scale(1.05);box-shadow:0 12px 24px #0000004d;border-color:#333}.card[_ngcontent-%COMP%]:active{animation:_ngcontent-%COMP%_bounce .5s}@keyframes _ngcontent-%COMP%_bounce{0%,20%,50%,80%,to{transform:translateY(0)}40%{transform:translateY(-20px)}60%{transform:translateY(-10px)}}"]})}return o})();var M=r(2595),K=r(3660),h=r(9773),_=r(3503),p=r(7860),d=r(649),x=r(4361);let j=(()=>{class o extends _.H{service;cdr;Cols;Data;lang=localStorage.getItem("language");constructor(t,i){super(),this.service=t,this.cdr=i,this.Cols=[p.v.fromJS({id:1,sorted:!0,filtered:!0,hidden:!1,field:"attachmentUrl",header:"ar"==this.lang?"\u0635\u0648\u0631\u0629":"Image ",type:"image"}),p.v.fromJS({id:2,sorted:!0,filtered:!0,true:!1,field:"id",header:"ar"==this.lang?"\u0627\u0644\u0643\u0648\u062f \u0627\u0644\u062a\u0639\u0631\u064a\u0641\u064a":"Id Code ",type:"text"}),p.v.fromJS({id:3,sorted:!0,filtered:!0,hidden:!1,field:"issuerName",header:"ar"==this.lang?"\u0627\u0633\u0645 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645":"User Name ",type:"text"}),p.v.fromJS({id:4,sorted:!0,filtered:!0,hidden:!1,field:"note",header:"ar"==this.lang?"\u062a\u0641\u0627\u0635\u064a\u0644 \u0627\u0644\u0645\u0634\u0643\u0644\u0629":"Issue Description ",type:"text"})]}ngOnInit(){this.service.getIssues(!0,!1,0,100,"","").pipe((0,h.R)(this.destroyed$)).subscribe({next:t=>{this.Data=t.items,this.cdr.detectChanges()}})}static \u0275fac=function(i){return new(i||o)(e.Y36(d.r9S),e.Y36(e.sBO))};static \u0275cmp=e.Xpm({type:o,selectors:[["app-issue-list"]],features:[e.qOj],decls:4,vars:7,consts:[[3,"value"],["id","kt_timeline_widget_2_card",1,"card"],[1,"card-body"],[3,"cols","rowsPageNumbers","pagination","scrollable","data","chooseColomns"]],template:function(i,n){1&i&&(e._UZ(0,"app-page-header",0),e.TgZ(1,"div",1)(2,"div",2),e._UZ(3,"app-shared-datatable",3),e.qZA()()),2&i&&(e.Q6J("value","Support.IssueList"),e.xp6(3),e.Q6J("cols",n.Cols)("rowsPageNumbers",10)("pagination",!0)("scrollable",!1)("data",n.Data)("chooseColomns",!0))},dependencies:[x.G,v.q]})}return o})();var $=r(8524),C=r(5118);class V{static close(){document.querySelector('button[role="button"]').click()}static closeLast(){let l=document.querySelectorAll('button[role="button"]');1===l.length?l[0].click():l.length>1?l[l.length-1].click():console.log("No elements found matching the selector.")}static closeLastOpen(){document.querySelector("#kt_body > div > button").click()}static closeByEscape(){const l=new KeyboardEvent("keydown",{key:"Escape",keyCode:27,code:"Escape",bubbles:!0});document.body.dispatchEvent(l)}}var X=r(9397),S=r(4664),W=r(2096),I=r(8472),u=r(6223),y=r(7248),A=r(1532),Z=r(8057);const ee=["fileInput"];function te(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"div")(1,"div",27),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.removeImage())}),e.TgZ(2,"span"),e._uU(3," x "),e.qZA()(),e._UZ(4,"p-image",28),e.qZA()}if(2&o){const t=e.oxw();e.xp6(4),e.Q6J("src",t.model.imageBase64)("preview",!0)}}function ne(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"button",29),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.triggerFileInput())}),e.qZA()}}function ie(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"div",2)(1,"div",21)(2,"div",4),e._UZ(3,"label",30),e.TgZ(4,"p-calendar",31),e.NdJ("ngModelChange",function(n){e.CHM(t);const a=e.oxw();return e.KtG(a.model.startDate=n)}),e.qZA()()(),e.TgZ(5,"div",21)(6,"div",4),e._UZ(7,"label",32),e.TgZ(8,"p-calendar",31),e.NdJ("ngModelChange",function(n){e.CHM(t);const a=e.oxw();return e.KtG(a.model.endDate=n)}),e.qZA()()()()}if(2&o){const t=e.oxw();e.xp6(4),e.Q6J("ngModel",t.model.startDate)("showTime",!0),e.xp6(4),e.Q6J("ngModel",t.model.endDate)("showTime",!0)}}let U=(()=>{class o extends _.H{services;config;cts;model;constructor(t,i,n){super(),this.services=t,this.config=i,this.cts=n,this.model=new d.nKz}ngOnInit(){"Edit"===this.config.data.mode&&(this.model=d.nKz.fromJS(this.config.data.eventDetails),this.model.description=this.config.data.eventDetails.addressDescription,this.model.imageBase64=this.config.data.eventDetails.imageUrl,this.isNonEnded=null==this.model.endDate&&null==this.model.startDate)}isNonEnded=!1;allEvents=[];createOrEditEvent(){this.services.getAllEvents(!1,1,2220,"","").pipe((0,h.R)(this.destroyed$),(0,X.b)(t=>{this.allEvents=t.data.items}),(0,S.w)(()=>{if(this.allEvents.some(i=>i.name===this.model.name)&&"Edit"!=this.config.data.mode)return this.cts.Show("warn","ar"==this.lang?"\u0627\u0644\u0627\u0633\u0645 \u0645\u0643\u0631\u0631":"Repeated Name","ar"==this.lang?"\u0644\u0627 \u064a\u0645\u0643\u0646 \u0627\u0636\u0627\u0641\u0629 \u0627\u0633\u0645 \u0645\u0646\u0627\u0633\u0628\u0629 \u0645\u0643\u0631\u0631 ":"you can not add event with same name."),(0,W.of)(null);if("Edit"===this.config.data.mode){let i=new d.gRh;return i.description=this.model.description,i.imageBase64=""==this.base64String?void 0:this.base64String,this.model.endDate&&(i.endDate=new Date(this.model.endDate.getTime()+72e5),i.startDate=new Date(this.model.startDate.getTime()+72e5)),i.eventDescription=this.model.eventDescription,i.eventId=this.config.data.eventDetails.id,i.isActive=this.model.isActive,i.name=this.model.name,i.latitude=this.model.latitude,i.longitude=this.model.longitude,this.services.editEvent(i)}return this.model.endDate&&(this.model.endDate=new Date(this.model.endDate.getTime()+72e5),this.model.startDate=new Date(this.model.startDate.getTime()+72e5)),this.services.newEvent(this.model)})).subscribe({next:t=>{t&&this.closePopup()},error:t=>{console.error("Error:",t)}})}closePopup(){V.closeLast()}removeImage(){this.base64String="",this.model.imageBase64=""}fileInput;triggerFileInput(){this.fileInput.nativeElement.click()}selectedFile=null;base64String="";statusFile;onFileSelected(t){const i=t.target;if(i.files&&i.files.length>0){this.selectedFile=i.files[0],this.statusFile={data:this.selectedFile,fileName:"Sample"};const n=new FileReader;n.onload=this.handleReaderLoaded.bind(this),n.readAsDataURL(this.selectedFile)}}handleReaderLoaded(t){this.base64String=t.target?.result,this.model.imageBase64=this.base64String}clearForm(){this.model=new d.nKz}ChangeNoneEvent(){!0===this.isNonEnded?(this.model.endDate=void 0,this.model.startDate=void 0):(this.model.endDate=new Date,this.model.startDate=new Date)}static \u0275fac=function(i){return new(i||o)(e.Y36(d.r9S),e.Y36(C.S),e.Y36(I.m))};static \u0275cmp=e.Xpm({type:o,selectors:[["app-event-create"]],viewQuery:function(i,n){if(1&i&&e.Gf(ee,5),2&i){let a;e.iGM(a=e.CRH())&&(n.fileInput=a.first)}},features:[e.qOj],decls:40,vars:18,consts:[["id","event-create-card"],[1,"card-body"],[1,"row"],[1,"col-md-4"],[1,"mb-4"],["translate","Events.Image",1,"form-label"],[1,"custom-file-input",2,"display","flex"],[4,"ngIf"],["type","button","class","btn btn-success","translate","Events.UploadImage",3,"click",4,"ngIf"],["type","file","hidden","",1,"form-control",3,"change"],["fileInput",""],[1,"col-md-8"],["translate","Events.Name",1,"form-label"],["type","text","autocomplete","",1,"form-control",3,"placeholder","ngModel","ngModelChange"],["translate","Events.Description",1,"form-label"],[1,"form-control",3,"placeholder","ngModel","ngModelChange"],[1,"mb-10"],[3,"ngModel","binary","ngModelChange","onChange"],[1,"form-label"],["class","row",4,"ngIf"],["translate","Events.DetailedDescription",1,"form-label"],[1,"col-6"],["translate","Events.Latitude",1,"form-label"],["translate","Events.Longitude",1,"form-label"],[1,"m-10",2,"display","flex","gap","10px","justify-content","center"],[1,"btn","btn-success",3,"translate","click"],["translate","SHARED.Cancel",1,"btn","btn-secondary",3,"click"],[1,"xbutton",3,"click"],["alt","Event Image","width","150",3,"src","preview"],["type","button","translate","Events.UploadImage",1,"btn","btn-success",3,"click"],["translate","Events.StartDate",1,"form-label"],["styleClass","fc-primng","dateFormat","dd/m/yy",3,"ngModel","showTime","ngModelChange"],["translate","Events.EndDate",1,"form-label"]],template:function(i,n){1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),e._UZ(5,"label",5),e.TgZ(6,"div",6),e.YNc(7,te,5,2,"div",7),e.qZA(),e.YNc(8,ne,1,0,"button",8),e.TgZ(9,"input",9,10),e.NdJ("change",function(s){return n.onFileSelected(s)}),e.qZA()()(),e.TgZ(11,"div",11)(12,"div",4),e._UZ(13,"label",12),e.TgZ(14,"input",13),e.NdJ("ngModelChange",function(s){return n.model.name=s}),e.qZA()(),e.TgZ(15,"div",4),e._UZ(16,"label",14),e.TgZ(17,"textarea",15),e.NdJ("ngModelChange",function(s){return n.model.eventDescription=s}),e.qZA()(),e.TgZ(18,"div",16)(19,"div")(20,"p-checkbox",17),e.NdJ("ngModelChange",function(s){return n.isNonEnded=s})("onChange",function(){return n.ChangeNoneEvent()}),e.qZA(),e.TgZ(21,"span",18),e._uU(22," \u062d\u062f\u062b \u062f\u0627\u0626\u0645 "),e.qZA()()(),e.YNc(23,ie,9,4,"div",19),e.TgZ(24,"div",4),e._UZ(25,"label",20),e.TgZ(26,"textarea",15),e.NdJ("ngModelChange",function(s){return n.model.description=s}),e.ALo(27,"translate"),e.qZA()(),e.TgZ(28,"div",2)(29,"div",21)(30,"div",4),e._UZ(31,"label",22),e.TgZ(32,"input",13),e.NdJ("ngModelChange",function(s){return n.model.latitude=s}),e.qZA()()(),e.TgZ(33,"div",21)(34,"div",4),e._UZ(35,"label",23),e.TgZ(36,"input",13),e.NdJ("ngModelChange",function(s){return n.model.longitude=s}),e.qZA()()()(),e.TgZ(37,"div",24)(38,"button",25),e.NdJ("click",function(){return n.createOrEditEvent()}),e.qZA(),e.TgZ(39,"button",26),e.NdJ("click",function(){return n.clearForm()}),e.qZA()()()()()()),2&i&&(e.xp6(7),e.Q6J("ngIf",n.model.imageBase64),e.xp6(1),e.Q6J("ngIf",!n.model.imageBase64),e.xp6(6),e.Q6J("placeholder","ar"===n.lang?"\u0627\u062f\u062e\u0644 \u0627\u0633\u0645 \u0627\u0644\u0645\u0646\u0627\u0633\u0628\u0629":"Enter Event Name")("ngModel",n.model.name),e.xp6(3),e.Q6J("placeholder","ar"===n.lang?"\u0627\u062f\u062e\u0644 \u0648\u0635\u0641 \u0627\u0644\u0645\u0646\u0627\u0633\u0628\u0629":"Enter Event Description")("ngModel",n.model.eventDescription),e.xp6(3),e.Q6J("ngModel",n.isNonEnded)("binary",!0),e.xp6(3),e.Q6J("ngIf",!1===n.isNonEnded),e.xp6(3),e.s9C("placeholder",e.lcZ(27,16,"Events.DetailedDescription")),e.Q6J("ngModel",n.model.description),e.xp6(6),e.Q6J("placeholder","ar"===n.lang?"\u0627\u062f\u062e\u0644 \u062e\u0637 \u0627\u0644\u0639\u0631\u0636":"Enter Latitude")("ngModel",n.model.latitude),e.xp6(4),e.Q6J("placeholder","ar"===n.lang?"\u0627\u062f\u062e\u0644 \u062e\u0637 \u0627\u0644\u0637\u0648\u0644":"Enter longitude")("ngModel",n.model.longitude),e.xp6(2),e.Q6J("translate","Edit"===n.config.data.mode?"SHARED.Edit":"SHARED.Create"))},dependencies:[g.O5,u.Fj,u.JJ,u.On,f.Pi,y.E,A.f,Z.XZ,f.X$],styles:[".xbutton[_ngcontent-%COMP%]{border:1px solid rgb(255,255,255);background-color:#ffffffa3;width:20px;height:20px;text-align:center;position:relative;top:21px;right:1px;z-index:2;cursor:pointer}"]})}return o})();var oe=r(3519),m=r.n(oe),J=r(7434),E=r(3965);let ae=(()=>{class o extends _.H{services;config;cts;constructor(t,i,n){super(),this.services=t,this.config=i,this.cts=n,this.Cols=[p.v.fromJS({id:1,sorted:!0,filtered:!0,hidden:!1,field:"organizationName",header:"ar"==this.lang?"\u0627\u0633\u0645 \u0627\u0644\u0645\u0624\u0633\u0633\u0629":"Organization Name ",type:"text"})],this.contentFirstBtn="ar"===this.lang?"<i class='fas fa-trash-alt'></i> \u062d\u0630\u0641":"<i class='fas fa-trash-alt'></i> Delete"}allOrganizationForEvent;allOrg=[];selectedOrg;contentFirstBtn="";Cols;ngOnInit(){this.loadOrganizationsAndEventDetails()}loadOrganizationsAndEventDetails(){const t=(new J.l).GetUserId();this.services.getListOfOrganizations(void 0,void 0,void 0,void 0,!1,void 0,void 0,t,void 0).pipe((0,S.w)(c=>(this.allOrg=c.data.items,this.services.getEventDetails(this.config.data.eventDetails.id,void 0,void 0))),(0,h.R)(this.destroyed$)).subscribe({next:c=>{this.allOrganizationForEvent=this.allOrg.filter(b=>c.data?.organizationIds?.includes(b.id))},error:()=>{this.cts.Show("error","ar"==this.lang?"\u0641\u0634\u0644\u062a \u0627\u0644\u0639\u0645\u0644\u064a\u0629":"Failed Proccee","ar"==this.lang?"\u0641\u0634\u0644\u062a \u0627\u0644\u0639\u0645\u0644\u064a\u0629":"Proccee Failed")}})}addOrgToEvent(){let t=new d.wb3;t.eventId=this.config.data.eventDetails.id,t.organizationsIds=[this.selectedOrg.id],this.services.addOrganizationsToEvent(t).subscribe({next:i=>{this.selectedOrg=new d.dgT,this.loadOrganizationsAndEventDetails()}})}DeleteRow(t){let i=new d.iOE;i.eventId=this.config.data.eventDetails.id,i.organizationsIds=[t.id],this.services.removeOrganizationsFromEvent(i).subscribe({next:n=>{this.selectedOrg=new d.dgT,this.loadOrganizationsAndEventDetails()}})}static \u0275fac=function(i){return new(i||o)(e.Y36(d.r9S),e.Y36(C.S),e.Y36(I.m))};static \u0275cmp=e.Xpm({type:o,selectors:[["app-event-subscriptions-list"]],features:[e.qOj],decls:9,vars:16,consts:[[1,"row"],[1,"col-md-9"],[1,"dropdown"],["styleClass","fc-primng",3,"options","ngModel","optionLabel","showClear","filter","placeholder","ngModelChange"],[1,"col-md-3"],[1,"btn","btn-success",3,"click"],[3,"cols","rowsPageNumbers","pagination","scrollable","data","chooseColomns","FirstBtn","contentFirstBtn","classFirstBtn","classSecondBtn","firstButtonEvent"]],template:function(i,n){1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"p-dropdown",3),e.NdJ("ngModelChange",function(s){return n.selectedOrg=s}),e.qZA()()(),e.TgZ(4,"div",4)(5,"button",5),e.NdJ("click",function(){return n.addOrgToEvent()}),e._uU(6," \u0625\u0636\u0627\u0641\u0629 "),e.qZA()()(),e.TgZ(7,"div",0)(8,"app-shared-datatable",6),e.NdJ("firstButtonEvent",function(s){return n.DeleteRow(s)}),e.qZA()()),2&i&&(e.xp6(3),e.Q6J("options",n.allOrg)("ngModel",n.selectedOrg)("optionLabel","organizationName")("showClear",!1)("filter",!0)("placeholder","ar"===n.lang?"\u0627\u062e\u062a\u0631 \u0627\u0644\u0645\u0624\u0633\u0633\u0629":"Choose Organization"),e.xp6(5),e.Q6J("cols",n.Cols)("rowsPageNumbers",10)("pagination",!0)("scrollable",!1)("data",n.allOrganizationForEvent)("chooseColomns",!0)("FirstBtn",!0)("contentFirstBtn",n.contentFirstBtn)("classFirstBtn","light-danger")("classSecondBtn","light-warning"))},dependencies:[x.G,u.JJ,u.On,E.Lt]})}return o})();function se(o,l){if(1&o&&(e.TgZ(0,"div")(1,"span",12),e._uU(2,"\u{1f4cd}"),e.qZA(),e._uU(3),e.qZA()),2&o){const t=e.oxw().$implicit;e.xp6(3),e.hij(" ",t.eventDescription," ")}}function re(o,l){if(1&o&&(e.TgZ(0,"div")(1,"span",12),e._uU(2,"\u{1f4cc}"),e.qZA(),e._uU(3),e.qZA()),2&o){const t=e.oxw().$implicit;e.xp6(3),e.hij(" ",t.addressDescription," ")}}function le(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"a",28),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit,a=e.oxw();return e.KtG(a.editEvent(n,!0))}),e._UZ(1,"i",29)(2,"span",30),e.qZA()}}function de(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"a",31),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit,a=e.oxw();return e.KtG(a.editEvent(n,!1))}),e._UZ(1,"i",29)(2,"span",32),e.qZA()}}const ce=function(o){return{visibility:o}};function pe(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"div",5)(1,"div"),e._UZ(2,"img",6),e.qZA(),e.TgZ(3,"div",7)(4,"div",8)(5,"div",9)(6,"div",10)(7,"span",11)(8,"span",12),e._uU(9,"\u{1f4c5}"),e.qZA(),e._uU(10),e.ALo(11,"date"),e.TgZ(12,"span"),e._uU(13,"|"),e.qZA(),e._uU(14),e.ALo(15,"date"),e.qZA(),e.TgZ(16,"span")(17,"span",12),e._UZ(18,"i",13),e.qZA(),e._uU(19),e.TgZ(20,"span"),e._uU(21," \u0645\u0634\u0627\u0631\u0643\u064a\u0646 "),e.qZA()()(),e.TgZ(22,"div")(23,"h2",14),e._uU(24),e.qZA()(),e.YNc(25,se,4,1,"div",15),e.YNc(26,re,4,1,"div",15),e.qZA(),e.TgZ(27,"div",16)(28,"div",17),e.YNc(29,le,3,0,"a",18),e.YNc(30,de,3,0,"a",19),e.TgZ(31,"a",20),e.NdJ("click",function(){const a=e.CHM(t).$implicit,s=e.oxw();return e.KtG(s.deleteEvent(a.id))}),e._UZ(32,"i",21)(33,"span",22),e.qZA()(),e.TgZ(34,"div",17)(35,"a",23),e.NdJ("click",function(){const a=e.CHM(t).$implicit,s=e.oxw();return e.KtG(s.openSubscripions(a))}),e._UZ(36,"i",24),e.TgZ(37,"span"),e._uU(38," \u0627\u0644\u0645\u0634\u0627\u0631\u0643\u064a\u0646"),e.qZA()(),e.TgZ(39,"a",25),e.NdJ("click",function(){const a=e.CHM(t).$implicit,s=e.oxw();return e.KtG(s.editEvent(a,void 0))}),e._UZ(40,"i",26)(41,"span",27),e.qZA()()()()()()}if(2&o){const t=l.$implicit;e.xp6(2),e.Q6J("src",t.imageUrl,e.LSH),e.xp6(5),e.Q6J("ngStyle",e.VKq(16,ce,t.endDate?"visible":"hidden")),e.xp6(3),e.hij(" ",e.xi3(11,10,t.startDate,"dd, MMM \u2013 yyyy hh:mm a")," "),e.xp6(4),e.hij(" ",e.xi3(15,13,t.endDate,"dd, MMM \u2013 yyyy hh:mm a")," "),e.xp6(5),e.hij(" ",t.organizationsCount," "),e.xp6(5),e.hij(" ",t.name," "),e.xp6(1),e.Q6J("ngIf",t.eventDescription),e.xp6(1),e.Q6J("ngIf",t.addressDescription),e.xp6(3),e.Q6J("ngIf",!t.isActive),e.xp6(1),e.Q6J("ngIf",t.isActive)}}let ue=(()=>{class o extends _.H{service;dialogService;fakeData=[];constructor(t,i){super(),this.service=t,this.dialogService=i}ngOnInit(){this.loadAllEvents()}loadAllEvents(){this.service.getAllEvents(!1,1,2220,"","").pipe((0,h.R)(this.destroyed$)).subscribe({next:t=>{this.fakeData=t.data.items},error:()=>{}})}addNewEvent(){const t=this.dialogService.open(U,{data:{mode:"Create"},header:"ar"==this.lang?"\u0627\u0636\u0627\u0641\u0629 \u0645\u0646\u0627\u0633\u0628\u0629":"Add New Event",width:"60%",maximizable:!0,resizable:!0,draggable:!0,autoZIndex:!0,baseZIndex:3});t.onDestroy.subscribe(i=>{this.loadAllEvents()}),t.onClose.subscribe(i=>{this.loadAllEvents()})}editEvent(t,i=void 0){if(void 0!==i){let n=new d.gRh;return n.isActive=i,n.name=t.name,n.eventDescription=t.eventDescription,n.description=t.addressDescription,n.endDate=t.endDate,n.eventId=t.id,n.latitude=t.latitude,n.longitude=t.longitude,n.startDate=t.startDate,this.convertImageUrlToBase64(t.imageUrl).then(a=>{n.imageBase64=a}),this.service.editEvent(n).subscribe({next:a=>{this.loadAllEvents()}})}{const n=this.dialogService.open(U,{data:{mode:"Edit",eventDetails:t},header:"ar"==this.lang?"\u062a\u0639\u062f\u064a\u0644 \u0627\u0644\u0645\u0646\u0627\u0633\u0628\u0629":"Edit Event",width:"60%",maximizable:!0,resizable:!0,draggable:!0,autoZIndex:!0,baseZIndex:9999999999});n.onDestroy.subscribe(a=>{this.loadAllEvents()}),n.onClose.subscribe(a=>{this.loadAllEvents()})}}convertImageUrlToBase64(t){return(0,T.Z)(function*(){const n=yield(yield fetch(t)).blob();return new Promise((a,s)=>{const c=new FileReader;c.onloadend=()=>a(c.result),c.onerror=s,c.readAsDataURL(n)})})()}openSubscripions(t){const i=this.dialogService.open(ae,{data:{eventDetails:t},header:"ar"==this.lang?"\u0627\u0644\u0645\u0624\u0633\u0633\u0627\u062a \u0627\u0644\u0645\u0634\u0627\u0631\u0643\u064a\u0646":"Event Organization",width:"60%",maximizable:!0,resizable:!0,draggable:!0,autoZIndex:!0,baseZIndex:9999999999});i.onClose.subscribe(n=>{this.loadAllEvents()}),i.onDestroy.subscribe(n=>{this.loadAllEvents()})}deleteEvent(t){var i=this;m().fire({title:"ar"==this.lang?"\u0647\u0644 \u0627\u0646\u062a \u0645\u062a\u0623\u0643\u062f \u061f":"Are You Sure ? ",text:"ar"==this.lang?" \u0639\u0645\u0644\u064a\u0629 \u0627\u0644\u062d\u0630\u0641 \u0644\u0627 \u064a\u0645\u0643\u0646 \u0627\u0644\u0631\u062c\u0648\u0639 \u0641\u064a\u0647\u0627 , \u0627\u0630\u0627 \u0643\u0646\u062a \u0645\u062a\u0623\u0643\u062f \u0627\u0636\u063a\u0637 \u0639\u0644\u064a \u062d\u0630\u0641 \u0627\u0648 \u064a\u0645\u0643\u0646\u0643 \u0627\u0644\u0631\u062c\u0648\u0639   ":"this The deletion process is irreversible. If you are sure, click Delete or you can Cancel it ",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"ar"==this.lang?"\u062d\u0630\u0641":"Delete",cancelButtonText:"ar"==this.lang?"\u0625\u0644\u063a\u0627\u0621":"Cancel"}).then(n=>{var a;n.isConfirmed&&m().fire({title:"ar"==this.lang?"\u0627\u0643\u062a\u0628 \u0627\u0644\u0631\u0642\u0645 \u0627\u0644\u0633\u0631\u064a \u0644\u0643\u064a \u062a\u062a\u0643\u0645\u0646 \u0645\u0646 \u0627\u0644\u062d\u0630\u0641":"Enter password to Delete User ",input:"text",inputAttributes:{autocapitalize:"off"},cancelButtonText:"ar"==this.lang?"\u0625\u0644\u063a\u0627\u0621":"Cancel",showCancelButton:!0,confirmButtonText:"ar"==this.lang?"\u062a\u0646\u0641\u064a\u0630 \u0639\u0645\u0644\u064a\u0629 \u0627\u0644\u062d\u0630\u0641 ":"Execute Delete",showLoaderOnConfirm:!0,preConfirm:(a=(0,T.Z)(function*(s){try{let c=new d.K8g;return c.eventId=t,c.confirmationPassword=s,i.service.deleteEvent(c).pipe((0,h.R)(i.destroyed$)).subscribe({next:b=>{m().fire({title:"ar"==i.lang?"\u062a\u0645 \u0627\u0644\u062d\u0630\u0641":"Deleted!",text:"ar"==i.lang?"\u062a\u0645 \u0627\u0644\u062d\u0630\u0641 \u0628\u0646\u062c\u0627\u062d ":"Record has been deleted Successfully.",icon:"success"}),i.loadAllEvents()}})}catch(c){m().showValidationMessage(`Request failed: ${c}  `)}}),function(c){return a.apply(this,arguments)}),allowOutsideClick:()=>!m().isLoading()}).then(a=>{})})}static \u0275fac=function(i){return new(i||o)(e.Y36(d.r9S),e.Y36(C.xA))};static \u0275cmp=e.Xpm({type:o,selectors:[["app-events-list"]],features:[e._Bn([C.xA]),e.qOj],decls:6,vars:3,consts:[[3,"value"],[1,"btn","btn-light-success","expand-button",3,"click"],["width","25",3,"src"],["translate","Events.addEvent",1,"mx-3"],["class","mb-4 cardoos","style","display: flex;",4,"ngFor","ngForOf"],[1,"mb-4","cardoos",2,"display","flex"],[2,"width","320px","height","150px","border-radius","12px",3,"src"],[1,"card","mx-4","p-6",2,"height","150px","width","100%"],[1,"row"],[1,"col-md-8"],[1,"",2,"display","flex","justify-content","space-between"],[2,"margin","3px","padding","5px","border","0.5px solid rgba(128, 128, 128, 0.56)","width","330px","text-align","center","border-radius","13px","direction","ltr","display","flex","justify-content","space-evenly",3,"ngStyle"],[1,"icon"],[1,"bi","bi-people-fill"],[2,"margin","5px"],[4,"ngIf"],[1,"col-md-4",2,"display","flex","align-items","center","justify-items","center","border","1px solid rgba(187, 187, 187, 0.734)","border-left-style","hidden","border-top-style","hidden","border-bottom-style","hidden"],[1,"row","m-2"],["class","btn btn-sm btn-xs   btn-light-success m-2",3,"click",4,"ngIf"],["class","btn btn-sm btn-xs   btn-light-info m-2",3,"click",4,"ngIf"],[1,"btn","btn-sm","btn-xs","btn-light-danger","m-2",3,"click"],[1,"fas","fa-trash-alt"],["translate","event.delete"],[1,"btn","btn-sm","btn-xs","btn-light-primary","m-2",3,"click"],[1,"fas","fa-users"],[1,"btn","btn-sm","btn-xs","btn-light-warning","m-2",3,"click"],[1,"fas","fa-edit"],["translate","event.edit"],[1,"btn","btn-sm","btn-xs","btn-light-success","m-2",3,"click"],[1,"fas","fa-eye"],["translate","event.activate"],[1,"btn","btn-sm","btn-xs","btn-light-info","m-2",3,"click"],["translate","event.deactivate"]],template:function(i,n){1&i&&(e._UZ(0,"app-page-header",0),e.TgZ(1,"button",1),e.NdJ("click",function(){return n.addNewEvent()}),e.TgZ(2,"span"),e._UZ(3,"img",2),e.qZA(),e._UZ(4,"span",3),e.qZA(),e.YNc(5,pe,42,18,"div",4)),2&i&&(e.Q6J("value","event.eventlist"),e.xp6(3),e.Q6J("src","../../../../assets/media/plus.webp",e.LSH),e.xp6(2),e.Q6J("ngForOf",n.fakeData))},dependencies:[g.sg,g.O5,g.PC,f.Pi,v.q,g.uU],styles:[".cardoos[_ngcontent-%COMP%]{transition:transform .3s ease-in-out,box-shadow .3s ease-in-out}.cardoos[_ngcontent-%COMP%]:hover{transform:translateY(-10px) scale(1.02);border-color:#333}@keyframes _ngcontent-%COMP%_bounce{0%,20%,50%,80%,to{transform:translateY(0)}40%{transform:translateY(-20px)}60%{transform:translateY(-10px)}}.expand-button[_ngcontent-%COMP%]{position:absolute;left:26px;margin-top:-52px;padding:10px;width:60px;overflow:hidden;white-space:nowrap;border:none;color:#fff;font-size:16px;cursor:pointer;border-radius:5px;transition:width .3s ease}.expand-button[_ngcontent-%COMP%]:hover{width:180px}.expand-button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:8px}"]})}return o})();var ge=r(8180),w=r(4442),L=r(4055);const me=["fileInput1"];function fe(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"div",9)(1,"div",15),e._UZ(2,"label",31),e.TgZ(3,"p-multiSelect",17),e.NdJ("ngModelChange",function(n){e.CHM(t);const a=e.oxw();return e.KtG(a.SelectedUsersIds=n)}),e.qZA()()()}if(2&o){const t=e.oxw();e.xp6(3),e.Q6J("options",t.AllUsers)("ngModel",t.SelectedUsersIds)("showClear",!1)("optionLabel","fullName")("optionValue","id")("placeholder","ar"===t.currentLanguage?"\u0627\u062e\u062a\u0631 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645\u064a\u0646":"Choose Users")}}function he(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"div",9)(1,"div",15),e._UZ(2,"label",32),e.TgZ(3,"p-dropdown",17),e.NdJ("ngModelChange",function(n){e.CHM(t);const a=e.oxw();return e.KtG(a.SelectedStateId=n)}),e.qZA()()()}if(2&o){const t=e.oxw();e.xp6(3),e.Q6J("options",t.StatTypes_6)("ngModel",t.SelectedStateId)("showClear",!1)("optionLabel","name")("optionValue","id")("placeholder","ar"===t.currentLanguage?"\u0627\u062e\u062a\u0631 \u0627\u0644\u0645\u062f\u064a\u0646\u0629":"Choose State")}}function ve(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"div",9)(1,"div",15),e._UZ(2,"label",33),e.TgZ(3,"p-dropdown",17),e.NdJ("ngModelChange",function(n){e.CHM(t);const a=e.oxw();return e.KtG(a.SelectedUserTypeId=n)}),e.qZA()()()}if(2&o){const t=e.oxw();e.xp6(3),e.Q6J("options",t.UserTypes_2)("ngModel",t.SelectedUserTypeId)("showClear",!1)("optionLabel","name")("optionValue","id")("placeholder","ar"===t.currentLanguage?"\u0646\u0648\u0639 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645":"Choose User Type ")}}function _e(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"div",9)(1,"div",15),e._UZ(2,"label",34),e.TgZ(3,"p-dropdown",17),e.NdJ("ngModelChange",function(n){e.CHM(t);const a=e.oxw();return e.KtG(a.SelectedOrgTypeId=n)}),e.qZA()()()}if(2&o){const t=e.oxw();e.xp6(3),e.Q6J("options",t.OrgTypes_3)("ngModel",t.SelectedOrgTypeId)("showClear",!1)("optionLabel","name")("optionValue","id")("placeholder","ar"===t.currentLanguage?"\u0646\u0648\u0639 \u0627\u0644\u0645\u0624\u0633\u0633\u0629":"Choose Org Type ")}}function Ce(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"div",9)(1,"div",15),e._UZ(2,"label",35),e.TgZ(3,"p-dropdown",17),e.NdJ("ngModelChange",function(n){e.CHM(t);const a=e.oxw();return e.KtG(a.SelectedDoctorSepcId=n)}),e.qZA()()()}if(2&o){const t=e.oxw();e.xp6(3),e.Q6J("options",t.DoctorSpecialty_5)("ngModel",t.SelectedDoctorSepcId)("showClear",!1)("optionLabel","name")("optionValue","id")("placeholder","ar"===t.currentLanguage?"\u0646\u0648\u0639 \u0627\u0644\u062a\u062e\u0635\u0635":"Choose Doctor Spec ")}}function be(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"div",9)(1,"div",15),e._UZ(2,"label",36),e.TgZ(3,"p-multiSelect",17),e.NdJ("ngModelChange",function(n){e.CHM(t);const a=e.oxw();return e.KtG(a.SelectedCompanyTypesIds=n)}),e.qZA()()()}if(2&o){const t=e.oxw();e.xp6(3),e.Q6J("options",t.CompanyTypes_4)("ngModel",t.SelectedCompanyTypesIds)("showClear",!1)("optionLabel","name")("optionValue","id")("placeholder","ar"===t.currentLanguage?"\u0646\u0648\u0639 \u0627\u0644\u0634\u0631\u0643\u0629":"Choose Company Type ")}}function Te(o,l){if(1&o&&e._UZ(0,"p-image",37),2&o){const t=e.oxw();e.Q6J("src",t.model.iconBase64)("preview",!0)}}let xe=(()=>{class o{service;cdr;Cols;Data;currentLanguage;lang=localStorage.getItem("language");contentFirstBtn;contentSecondBtn;model=new d.dZ9;currentPeriod={id:0};timePeriod={from:"",to:""};notificationStates=w.YA;targetDevices=w.Rf;targetUserTypes=w.C1;currentSelectedNotificationState;currentSelectedTargetDevice;currentSelectedTargetUserType;NotificationTypes=[{id:1,name:"Topics"},{id:2,name:"Users"}];currentSelectedNotificationTypeId=0;AllUsers=[];SelectedUsersIds=[];SelectedCompanyTypesIds=[];SelectedStateId="";SelectedUserTypeId="";SelectedOrgTypeId="";SelectedDoctorSepcId="";AllTypes=[];TargetDevices_1=[];UserTypes_2=[];OrgTypes_3=[];CompanyTypes_4=[];DoctorSpecialty_5=[];StatTypes_6=[];constructor(t,i){this.service=t,this.cdr=i,this.lang=localStorage.getItem("language"),this.Cols=[p.v.fromJS({id:1,sorted:!0,filtered:!0,hidden:!1,field:"iconUrl",header:"ar"==this.lang?"\u0635\u0648\u0631\u0629":"Image ",type:"image"}),p.v.fromJS({id:1,sorted:!0,filtered:!0,hidden:!0,field:"notificationId",header:"ar"==this.lang?"\u0627\u0644\u0643\u0648\u062f \u0627\u0644\u062a\u0639\u0631\u064a\u0641\u064a":"Id Code ",type:"text"}),p.v.fromJS({id:2,sorted:!0,filtered:!0,hidden:!1,field:"notificationTitle",header:"ar"==this.lang?"\u0627\u0644\u0639\u0646\u0648\u0627\u0646":"Title ",type:"text"}),p.v.fromJS({id:3,sorted:!0,filtered:!0,hidden:!1,field:"notificationBody",header:"ar"==this.lang?"\u0627\u0644\u062a\u0641\u0627\u0635\u064a\u0644":"Description ",type:"text"}),p.v.fromJS({id:4,sorted:!0,filtered:!0,hidden:!1,field:"state",header:"ar"==this.lang?"\u062d\u0627\u0644\u0629 \u0627\u0644\u0627\u0634\u0639\u0627\u0631":"State ",type:"NotificationState"})]}currentClinic={specialityId:"",hospitalId:"",clinicDescription:""};ngOnInit(){this.search(),this.searchUsers(),this.GetAllTypes(),this.currentLanguage=localStorage.getItem("language")??"ar"}GetAllTypes(){this.service.getTopics(void 0,void 0).subscribe({next:t=>{this.AllTypes=t.data,this.TargetDevices_1=t.data.filter(i=>1==i.type)[0].topics,this.UserTypes_2=t.data.filter(i=>2==i.type)[0].topics,this.OrgTypes_3=t.data.filter(i=>3==i.type)[0].topics,this.CompanyTypes_4=t.data.filter(i=>4==i.type)[0].topics,this.DoctorSpecialty_5=t.data.filter(i=>5==i.type)[0].topics,this.StatTypes_6=t.data.filter(i=>6==i.type)[0].topics},error:()=>{}})}search(){this.service.getNotifications(!1,1,999999,void 0,void 0).subscribe({next:t=>{this.Data=t.data.items,this.cdr.detectChanges()},error:()=>{}})}Add(){let t=new d.dZ9;t.body=this.model.body,t.title=this.model.title,t.controlPanelRedirectUrl=t.controlPanelRedirectUrl,t.mobileRedirectUrl=t.mobileRedirectUrl,t.pushNow=!0,t.body=t.body,t.title=t.title,t.topicIds=[this.SelectedUserTypeId,this.SelectedOrgTypeId,this.SelectedDoctorSepcId,this.SelectedStateId,this.currentSelectedTargetDevice,...this.SelectedCompanyTypesIds].filter(i=>null!=i&&""!==i),t.targetUserIds=[...this.SelectedUsersIds],t.notificationTargetType=this.currentSelectedNotificationTypeId,t.iconBase64=this.model.iconBase64,this.service.sendNotification(t).subscribe({next:i=>{this.search(),this.Clear()}})}searchUsers(){let s,O,t=(new J.l).GetUserId();O=!1,s=!1,this.service.searchUsers(void 0,void 0,void 0,!0,!1,!1,void 0,void 0,t,void 0).pipe((0,ge.q)(1)).subscribe({next:Ze=>{this.AllUsers=Ze.data.items,this.cdr.detectChanges()},error:()=>{}})}Clear(){this.model=new d.dZ9}selectedFile1=null;fileInput1;base64String1="";triggerFileInput1(){this.fileInput1.nativeElement.click(),this.cdr.detectChanges()}onFileSelected1(t){const i=t.target;if(i.files&&i.files.length>0){this.selectedFile1=i.files[0];const n=new FileReader;n.onload=this.handleReaderLoaded1.bind(this),n.readAsDataURL(this.selectedFile1)}}handleReaderLoaded1(t){this.base64String1=t.target?.result,this.model.iconBase64=String(this.base64String1),this.cdr.detectChanges()}showTopics(t){console.log(t.topicNames),m().fire({title:"\u0627\u0644\u0645\u0648\u0627\u0636\u064a\u0639 - Topics",html:this.getTopics(t.topicNames)}).then(i=>{i.dismiss===m().DismissReason.timer&&console.log("I was closed by the timer")})}getTopics(t){let i;i="<ui   dir='ltr' style='direction: ltr'> ";for(let n=0;n<t.length;n++)i+="<li> "+t[n]+" </li>";return i+=" </ui> ",i}static \u0275fac=function(i){return new(i||o)(e.Y36(d.r9S),e.Y36(e.sBO))};static \u0275cmp=e.Xpm({type:o,selectors:[["app-notification-list"]],viewQuery:function(i,n){if(1&i&&e.Gf(me,5),2&i){let a;e.iGM(a=e.CRH())&&(n.fileInput1=a.first)}},decls:51,vars:34,consts:[[1,"m-3"],["translate","notification.notificationList",2,"font-weight","bold","color","white"],[1,"row"],[1,"col-md-8"],["id","kt_timeline_widget_2_card",1,"card"],[1,"card-body"],[3,"cols","rowsPageNumbers","pagination","scrollable","data","chooseColomns","FirstBtn","contentFirstBtn","classFirstBtn","firstButtonEvent"],[1,"col-md-4"],[1,"col-md-12"],[1,"mb-10"],["translate","notification.title",1,"form-label"],["type","text","placeholder","","autocomplete","",1,"form-control",3,"ngModel","ngModelChange"],["translate","notification.body",1,"form-label"],["translate","notification.urlForAdmin",1,"form-label"],["translate","notification.urlForMobile",1,"form-label"],[1,"dropdown"],["for","targetDevice","translate","notification.TargetDevice"],["styleClass","fc-primng",3,"options","ngModel","showClear","optionLabel","optionValue","placeholder","ngModelChange"],["for","targetDevice","translate","notification.Type"],["class","mb-10",4,"ngIf"],["translate","SHARED.Image",1,"form-label"],[1,"custom-file-input",2,"display","flex","justify-content","space-evenly","align-content","center","align-items","flex-end"],["alt","Image","width","80",3,"src","preview",4,"ngIf"],["type","button","translate","SHARED.Image",1,"btn","btn-success",3,"click"],["type","file",1,"form-control",3,"change"],["fileInput1",""],["id","ttt2",3,"ngModel","binary","ngModelChange"],["translate","notification.sendNow",1,"form-label","m-2"],[2,"display","contents"],["translate","SHARED.Create",1,"btn","btn-success","mx-3",2,"width","60%",3,"click"],["translate","SHARED.Cancel",1,"btn","btn-bordered","btn-outline-success","mx-3",2,"width","25%",3,"click"],["for","targetDevice","translate","notification.users"],["for","targetDevice","translate","notification.state"],["for","targetDevice","translate","notification.userType"],["for","targetDevice","translate","notification.orgType"],["for","targetDevice","translate","notification.doctorSpeciality"],["for","targetDevice","translate","notification.companyType"],["alt","Image","width","80",3,"src","preview"]],template:function(i,n){1&i&&(e.TgZ(0,"span",0),e._UZ(1,"h2",1),e.qZA(),e.TgZ(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"app-shared-datatable",6),e.NdJ("firstButtonEvent",function(s){return n.showTopics(s)}),e.qZA()()()(),e.TgZ(7,"div",7)(8,"div",4)(9,"div",5)(10,"div",8)(11,"div",9),e._UZ(12,"label",10),e.TgZ(13,"input",11),e.NdJ("ngModelChange",function(s){return n.model.title=s}),e.qZA()(),e.TgZ(14,"div",9),e._UZ(15,"label",12),e.TgZ(16,"textarea",11),e.NdJ("ngModelChange",function(s){return n.model.body=s}),e.qZA()(),e.TgZ(17,"div",9),e._UZ(18,"label",13),e.TgZ(19,"input",11),e.NdJ("ngModelChange",function(s){return n.model.controlPanelRedirectUrl=s}),e.qZA()(),e.TgZ(20,"div",9),e._UZ(21,"label",14),e.TgZ(22,"input",11),e.NdJ("ngModelChange",function(s){return n.model.mobileRedirectUrl=s}),e.qZA()(),e.TgZ(23,"div",9)(24,"div",15),e._UZ(25,"label",16),e.TgZ(26,"p-dropdown",17),e.NdJ("ngModelChange",function(s){return n.currentSelectedTargetDevice=s}),e.qZA()()(),e.TgZ(27,"div",9)(28,"div",15),e._UZ(29,"label",18),e.TgZ(30,"p-dropdown",17),e.NdJ("ngModelChange",function(s){return n.currentSelectedNotificationTypeId=s}),e.qZA()()()(),e.YNc(31,fe,4,6,"div",19),e.YNc(32,he,4,6,"div",19),e.YNc(33,ve,4,6,"div",19),e.YNc(34,_e,4,6,"div",19),e.YNc(35,Ce,4,6,"div",19),e.YNc(36,be,4,6,"div",19),e.TgZ(37,"div",9),e._UZ(38,"label",20),e.TgZ(39,"div",21),e.YNc(40,Te,1,2,"p-image",22),e.TgZ(41,"button",23),e.NdJ("click",function(){return n.triggerFileInput1()}),e.qZA(),e.TgZ(42,"input",24,25),e.NdJ("change",function(s){return n.onFileSelected1(s)}),e.qZA()()(),e.TgZ(44,"div",9)(45,"div")(46,"p-checkbox",26),e.NdJ("ngModelChange",function(s){return n.model.pushNow=s}),e.qZA(),e._UZ(47,"span",27),e.qZA()(),e.TgZ(48,"div",28)(49,"button",29),e.NdJ("click",function(){return n.Add()}),e.qZA(),e.TgZ(50,"button",30),e.NdJ("click",function(){return n.Clear()}),e.qZA()()()()()()),2&i&&(e.xp6(6),e.Q6J("cols",n.Cols)("rowsPageNumbers",10)("pagination",!0)("scrollable",!1)("data",n.Data)("chooseColomns",!0)("FirstBtn",!0)("contentFirstBtn","show Topics")("classFirstBtn","success"),e.xp6(7),e.Q6J("ngModel",n.model.title),e.xp6(3),e.Q6J("ngModel",n.model.body),e.xp6(3),e.Q6J("ngModel",n.model.controlPanelRedirectUrl),e.xp6(3),e.Q6J("ngModel",n.model.mobileRedirectUrl),e.xp6(4),e.Q6J("options",n.TargetDevices_1)("ngModel",n.currentSelectedTargetDevice)("showClear",!1)("optionLabel","name")("optionValue","id")("placeholder","ar"===n.currentLanguage?"\u0627\u062e\u062a\u0631 \u0627\u0644\u0627\u062c\u0647\u0632\u0629 \u0627\u0644\u0645\u0633\u062a\u0647\u062f\u0641\u0629":"Choose Target Devices "),e.xp6(4),e.Q6J("options",n.NotificationTypes)("ngModel",n.currentSelectedNotificationTypeId)("showClear",!1)("optionLabel","name")("optionValue","id")("placeholder","ar"===n.currentLanguage?"\u0627\u062e\u062a\u0631 \u0646\u0648\u0639 \u0627\u0644\u0627\u0634\u0639\u0627\u0631":"Choose Notification Type"),e.xp6(1),e.Q6J("ngIf",2===n.currentSelectedNotificationTypeId),e.xp6(1),e.Q6J("ngIf",1===n.currentSelectedNotificationTypeId),e.xp6(1),e.Q6J("ngIf",1===n.currentSelectedNotificationTypeId),e.xp6(1),e.Q6J("ngIf","d4ea7e5b-575f-4c79-8244-6d8025a9c96a"===n.SelectedUserTypeId),e.xp6(1),e.Q6J("ngIf","445ce4ee-e2c9-4c48-a89b-b22ee0047d3b"===n.SelectedUserTypeId),e.xp6(1),e.Q6J("ngIf","e256a5ba-50f5-4699-a2bb-ec93c40f354c"===n.SelectedOrgTypeId),e.xp6(4),e.Q6J("ngIf",n.model.iconBase64),e.xp6(6),e.Q6J("ngModel",n.model.pushNow)("binary",!0))},dependencies:[g.O5,x.G,u.Fj,u.JJ,u.On,f.Pi,y.E,E.Lt,Z.XZ,L.NU],styles:[".custom-file-input[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{display:none}"]})}return o})(),ye=(()=>{class o{static \u0275fac=function(i){return new(i||o)};static \u0275mod=e.oAB({type:o});static \u0275inj=e.cJS({imports:[g.ez,$.m,u.u5,N.Bz.forChild([{path:"",component:H,data:{animation:"DashboardComponent"}},{path:"Issues",component:j,data:{animation:"IssueListComponent"}},{path:"Events",component:ue,data:{animation:"EventsListComponent"}},{path:"Notification",component:xe,data:{animation:"NotificationListComponent"}}]),M.HB,M._9,f.aw,K.q,v.q,y.$,A._8,E.kW,Z.nD,L.q4]})}return o})()}}]);