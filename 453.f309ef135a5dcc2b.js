"use strict";(self.webpackChunkdemo2=self.webpackChunkdemo2||[]).push([[453],{3453:(X,v,s)=>{s.r(v),s.d(v,{ManageStatusModule:()=>q});var g=s(6814),m=s(7304),M=s(3415),u=s(6223),h=s(6663),F=s(3660),U=s(2160),J=s(5118),D=s(4055),A=s(9378),L=s(1532),d=s(649),t=s(5879),S=s(8472),x=s(8039),I=s(6128),w=s(7248);const N=["fileInput"];function O(n,l){if(1&n){const e=t.EpF();t.TgZ(0,"div",21)(1,"div",22)(2,"p-avatar",23),t.NdJ("onImageError",function(a){t.CHM(e);const r=t.oxw();return t.KtG(r.onImageError(a))}),t.qZA()(),t.TgZ(3,"div",24)(4,"div",25),t._uU(5),t.qZA(),t.TgZ(6,"a",26),t._uU(7),t.qZA()()()}if(2&n){const e=l.ngIf,i=t.oxw();t.xp6(2),t.Q6J("image",i.imageUrl),t.xp6(3),t.hij(" ",e.fullName," "),t.xp6(2),t.hij(" ",e.email," ")}}const Q=function(n){return{"background-color":n}};function E(n,l){if(1&n&&(t.TgZ(0,"div",27),t._UZ(1,"span",28),t.qZA()),2&n){const e=t.oxw();t.Q6J("ngStyle",t.VKq(1,Q,e.colorForStatus))}}function j(n,l){if(1&n){const e=t.EpF();t.TgZ(0,"p-image",37),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.triggerFileInput())}),t.qZA()}2&n&&t.Q6J("preview",!1)}function B(n,l){if(1&n){const e=t.EpF();t.TgZ(0,"p-image",38),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.triggerFileInput())}),t.qZA()}if(2&n){const e=t.oxw(2);t.Q6J("src",e.ImageURL)("preview",!1)}}function k(n,l){if(1&n){const e=t.EpF();t.TgZ(0,"div",29)(1,"div",30)(2,"div",31),t.YNc(3,j,1,1,"p-image",32),t.qZA(),t.TgZ(4,"div",33),t.YNc(5,B,1,2,"p-image",34),t.qZA(),t.TgZ(6,"input",35,36),t.NdJ("change",function(a){t.CHM(e);const r=t.oxw();return t.KtG(r.onFileSelected(a))}),t.qZA()()()}if(2&n){const e=t.oxw();t.xp6(3),t.Q6J("ngIf",!e.ImageURL),t.xp6(2),t.Q6J("ngIf",e.ImageURL)}}let P=(()=>{class n{cdr;service;cts;lang=localStorage.getItem("language");constructor(e,i,a){this.cdr=e,this.service=i,this.cts=a}stateOptions=[{labelAr:"\u0631\u0641\u0639 \u0635\u0648\u0631\u0629 \u0645\u0639 \u0646\u0635",labelEn:"Upload Image With Text",value:"Image"},{labelAr:"\u0631\u0641\u0639 \u0646\u0635 \u0641\u0642\u0637",labelEn:"Upload Text Only ",value:"Text"}];value="Image";user$;imageUrl="";ChangeLanguage(e){}ngOnInit(){let e=localStorage.getItem("user");const i=JSON.parse(e);this.imageUrl=i.profileImageUrl,this.user$=new d.QwO(i)}defaultImage="https://mutabbib-test.start-it-ly.com/assets/logo/png%202.png";onImageError(e){e.target.src=this.defaultImage}defaultImage2="../../../../../assets/onImageError2.png";onImageError2(e){e.target.src=this.defaultImage2}textForStatus="";colorForStatus="#60b4c0";ImageURL="";fileInput;triggerFileInput(){this.fileInput.nativeElement.click(),this.cdr.detectChanges()}selectedFile=null;base64String="";statusFile;onFileSelected(e){const i=e.target;if(i.files&&i.files.length>0){this.selectedFile=i.files[0],this.statusFile={data:this.selectedFile,fileName:"Sample"};const a=new FileReader;a.onload=this.handleReaderLoaded.bind(this),a.readAsDataURL(this.selectedFile)}}handleReaderLoaded(e){this.base64String=e.target?.result,this.ImageURL=String(this.base64String),this.cdr.detectChanges()}AddStatus(){let e=localStorage.getItem("org");const i=JSON.parse(e);let r,o,c,p,b,_,T,Z,C;r=new d.u47(i).profileId,c=this.textForStatus,o=1,p=1,b=0,_="",T="",Z=1,C=1,this.service.newStatus(r,1,c,this.statusFile,1,0,"","",1,1).subscribe({next:W=>{W.isSuccess&&(this.cts.Show("success","ar"==this.lang?"\u0639\u0645\u0644\u064a\u0629 \u0646\u0627\u062c\u062d\u0629":"Success Proccee","ar"==this.lang?"\u062a\u0645\u062a \u0639\u0645\u0644\u064a\u0629 \u0627\u0644\u0627\u0636\u0627\u0641\u0629 \u0628\u0646\u062c\u0627\u062d":"Added Successfully"),this.textForStatus="",this.ImageURL="")}})}static \u0275fac=function(i){return new(i||n)(t.Y36(t.sBO),t.Y36(d.r9S),t.Y36(S.m))};static \u0275cmp=t.Xpm({type:n,selectors:[["app-manage-status"]],viewQuery:function(i,a){if(1&i&&t.Gf(N,5),2&i){let r;t.iGM(r=t.CRH())&&(a.fileInput=r.first)}},decls:29,vars:7,consts:[[1,"circle"],[2,"display","flex","justify-content","space-between"],[1,"m-3"],["translate","status.datacase",2,"font-weight","bold","color","white"],[1,"my-3"],["routerLink","/ManageStatus/List","translate","status.listcase",1,"btn","btn-light"],["id","kt_timeline_widget_2_card",1,"card"],[1,"card-body"],[2,"text-align","center"],["optionValue","value",2,"direction","ltr",3,"options","ngModel","optionLabel","ngModelChange","onChange"],[1,"row"],[1,"col-md-4"],["translate","status.story",2,"color","gray","margin-bottom","10px"],["class","menu-content d-flex align-items-center",4,"ngIf"],[1,"form-control",3,"ngModel","ngModelChange"],["translate","status.addstory",1,"btn","btn-success",3,"click"],[1,"col-md-8"],["translate","status.preview",2,"color","gray","margin-bottom","10px"],[2,"background-color","black","width","100%","height","70vh","display","flex","justify-content","center","align-items","center","border-radius","17px"],["style"," width: 25%; height: 60vh; border-radius: 17px; display: flex; justify-content: center; align-items: center; overflow: hidden; text-align: center; word-wrap: break-word;",3,"ngStyle",4,"ngIf"],["style","border:1.2px solid white ;background-color: gray ;width: 25%; height: 60vh; border-radius: 17px; display: flex; justify-content: center; align-items: center; overflow: hidden; text-align: center; word-wrap: break-word;",4,"ngIf"],[1,"menu-content","d-flex","align-items-center"],[1,"symbol","symbol-50px","me-5","mt-3",2,"scale","1.8"],["shape","circle",3,"image","onImageError"],[1,"d-flex","flex-column"],[1,"fw-bolder","d-flex","align-items-center","fs-5"],[1,"fw-bold","text-muted","text-hover-primary","fs-7","cursor-pointer"],[2,"width","25%","height","60vh","border-radius","17px","display","flex","justify-content","center","align-items","center","overflow","hidden","text-align","center","word-wrap","break-word",3,"ngStyle"],["translate","status.typing",1,"text-white",2,"max-width","100%","overflow-wrap","break-word"],[2,"border","1.2px solid white","background-color","gray","width","25%","height","60vh","border-radius","17px","display","flex","justify-content","center","align-items","center","overflow","hidden","text-align","center","word-wrap","break-word"],[1,"custom-file-input",2,"display","flex","justify-content","space-evenly","align-content","center","align-items","flex-end"],[2,"cursor","pointer"],["src","../../../assets/uploadStatus.png","alt","Image","width","80",3,"preview","click",4,"ngIf"],[1,"custom-Preview-Image"],["alt","Image",3,"src","preview","click",4,"ngIf"],["type","file",1,"form-control",3,"change"],["fileInput",""],["src","../../../assets/uploadStatus.png","alt","Image","width","80",3,"preview","click"],["alt","Image",3,"src","preview","click"]],template:function(i,a){1&i&&(t._UZ(0,"div",0),t.TgZ(1,"div",1)(2,"span",2),t._UZ(3,"h2",3),t.qZA(),t.TgZ(4,"span",4),t._UZ(5,"button",5),t.qZA()(),t.TgZ(6,"div",6)(7,"div",7)(8,"div",8)(9,"p-selectButton",9),t.NdJ("ngModelChange",function(o){return a.value=o})("onChange",function(o){return a.ChangeLanguage(o)}),t.qZA()()()(),t._UZ(10,"br"),t.TgZ(11,"div",10)(12,"div",11)(13,"div",6)(14,"div",7),t._UZ(15,"h1",12),t.YNc(16,O,8,3,"div",13),t._UZ(17,"hr"),t.TgZ(18,"textarea",14),t.NdJ("ngModelChange",function(o){return a.textForStatus=o}),t.qZA(),t._UZ(19,"br"),t.TgZ(20,"div",10)(21,"button",15),t.NdJ("click",function(){return a.AddStatus()}),t.qZA()()()()(),t.TgZ(22,"div",16)(23,"div",6)(24,"div",7),t._UZ(25,"h1",17),t.TgZ(26,"div",18),t.YNc(27,E,2,3,"div",19),t.YNc(28,k,8,2,"div",20),t.qZA()()()()()),2&i&&(t.xp6(9),t.Q6J("options",a.stateOptions)("ngModel",a.value)("optionLabel","ar"===a.lang?"labelAr":"labelEn"),t.xp6(7),t.Q6J("ngIf",a.user$),t.xp6(2),t.Q6J("ngModel",a.textForStatus),t.xp6(9),t.Q6J("ngIf","Text"===a.value),t.xp6(1),t.Q6J("ngIf","Image"===a.value))},dependencies:[g.O5,g.PC,m.rH,u.Fj,u.JJ,u.On,h.Pi,x.q,I.UN,w.E],styles:[".custom-file-input[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{display:none}"]})}return n})();var Y=s(8676),f=s(7860),z=s(4361),R=s(5219),y=s(2795);function H(n,l){1&n&&t._UZ(0,"img",20),2&n&&t.Q6J("src",l.$implicit.itemImageSrc,t.LSH)}function V(n,l){if(1&n&&(t.TgZ(0,"h4",21),t._uU(1),t.TgZ(2,"p",22),t._uU(3),t.qZA()()),2&n){const e=l.$implicit;t.xp6(1),t.hij(" ",e.title," "),t.xp6(2),t.Oqu(e.alt)}}const $=function(){return{"max-width":"640px","margin-top":"2em"}};function G(n,l){if(1&n&&(t.TgZ(0,"div")(1,"p-galleria",17),t.YNc(2,H,1,1,"ng-template",18),t.YNc(3,V,4,2,"ng-template",19),t.qZA()()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("value",e.images)("showItemNavigators",!0)("showThumbnails",!1)("showIndicators",!0)("showIndicatorsOnItem",!0)("responsiveOptions",e.responsiveOptions)("circular",!0)("autoPlay",!0)("transitionInterval",4e3)("containerStyle",t.DdM(10,$))}}let K=(()=>{class n{service;cdr;cts;Cols;lang=localStorage.getItem("language");Data=[];contentFirstBtn;images=[];responsiveOptions=[{breakpoint:"1024px",numVisible:5},{breakpoint:"768px",numVisible:3},{breakpoint:"560px",numVisible:1}];constructor(e,i,a){this.service=e,this.cdr=i,this.cts=a,this.Cols=[f.v.fromJS({id:1,sorted:!0,filtered:!0,hidden:!0,field:"id",header:"ar"==this.lang?"\u0627\u0644\u0643\u0648\u062f \u0627\u0644\u062a\u0639\u0631\u064a\u0641\u064a":"Id Code ",type:"text"}),f.v.fromJS({id:2,sorted:!0,filtered:!0,hidden:!1,field:"statusUrl",header:"ar"==this.lang?"\u0627\u0644\u0635\u0648\u0631\u0629":"Image ",type:"image"}),f.v.fromJS({id:3,sorted:!0,filtered:!0,hidden:!1,field:"note",header:"ar"==this.lang?"\u0627\u0644\u0646\u0635":"Text ",type:"text"})],this.contentFirstBtn="ar"===this.lang?"<i class='fas fa-trash-alt'></i> \u062d\u0630\u0641":"<i class='fas fa-trash-alt'></i> Delete"}ngOnInit(){this.loadData()}loadData(){let e=localStorage.getItem("org");const i=JSON.parse(e);var a=new d.u47(i);this.service.getStatus(a.profileId,void 0,void 0).subscribe({next:r=>{this.Data=r.data;for(let o=0;o<this.Data.length;o++){const c=this.Data[o];let p={itemImageSrc:c.statusUrl,thumbnailImageSrc:c.statusUrl,alt:this.getTimeFromDateString(c.createdAt),title:c.note};this.images?.push(p)}this.cdr.detectChanges()}})}Delete(e){let i=localStorage.getItem("org");const a=JSON.parse(i);var r=new d.u47(a);let o=new d._Q2;o.statusId=e.statusId,o.targetProfileId=r.profileId,this.service.deleteStatus(o).subscribe({next:c=>{c.isSuccess&&(this.loadData(),this.cts.Show("success","ar"==this.lang?"\u0639\u0645\u0644\u064a\u0629 \u0646\u0627\u062c\u062d\u0629":"Success Proccee","ar"==this.lang?"\u062a\u0645\u062a \u0639\u0645\u0644\u064a\u0629 \u0627\u0644\u062d\u0630\u0641 \u0628\u0646\u062c\u0627\u062d":"Deleted Successfully"))},error:()=>{}})}getTimeFromDateString(e){const i=e.getHours().toString().padStart(2,"0"),a=e.getMinutes().toString().padStart(2,"0");return e.getSeconds().toString().padStart(2,"0"),`Today at : ${i}:${a}`}static \u0275fac=function(i){return new(i||n)(t.Y36(d.r9S),t.Y36(t.sBO),t.Y36(S.m))};static \u0275cmp=t.Xpm({type:n,selectors:[["app-statuslist"]],decls:17,vars:10,consts:[[2,"display","flex","justify-content","space-between"],[1,"m-3"],["translate","status.StoryList",2,"font-weight","bold","color","white"],[1,"my-3"],["routerLink","/ManageStatus","translate","status.createNewStory",1,"btn","btn-light"],[1,"row"],[1,"col-md-7"],["id","kt_timeline_widget_2_card",1,"card"],[1,"card-body"],[3,"cols","rowsPageNumbers","pagination","scrollable","data","chooseColomns","FirstBtn","contentFirstBtn","classFirstBtn","firstButtonEvent"],[1,"col-md-5"],[2,"background-color","black","width","100%","height","70vh","display","flex","justify-content","center","align-items","center","border-radius","17px"],[2,"height","60vh","border-radius","17px","display","flex","justify-content","center","align-items","center","overflow","hidden","text-align","center","word-wrap","break-word"],[2,"border","1.2px solid white","height","60vh","border-radius","17px","display","flex","justify-content","center","align-items","center","overflow","hidden","text-align","center","word-wrap","break-word"],[1,"custom-file-input",2,"display","flex","justify-content","space-evenly","align-content","center","align-items","flex-end"],[1,"custom-Preview-Image"],[4,"ngIf"],[3,"value","showItemNavigators","showThumbnails","showIndicators","showIndicatorsOnItem","responsiveOptions","circular","autoPlay","transitionInterval","containerStyle"],["pTemplate","item"],["pTemplate","caption"],[2,"width","100%","display","block",3,"src"],[2,"margin-bottom","4rem","color","#ffffff"],[2,"color","coral"]],template:function(i,a){1&i&&(t.TgZ(0,"div",0)(1,"span",1),t._UZ(2,"h2",2),t.qZA(),t.TgZ(3,"span",3),t._UZ(4,"button",4),t.qZA()(),t.TgZ(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8)(9,"app-shared-datatable",9),t.NdJ("firstButtonEvent",function(o){return a.Delete(o)}),t.qZA()()()(),t.TgZ(10,"div",10)(11,"div",11),t._UZ(12,"div",12),t.TgZ(13,"div",13)(14,"div",14)(15,"div",15),t.YNc(16,G,4,11,"div",16),t.qZA()()()()()()),2&i&&(t.xp6(9),t.Q6J("cols",a.Cols)("rowsPageNumbers",10)("pagination",!0)("scrollable",!1)("data",a.Data)("chooseColomns",!0)("FirstBtn",!0)("contentFirstBtn",a.contentFirstBtn)("classFirstBtn","light-danger"),t.xp6(7),t.Q6J("ngIf",(null==a.images?null:a.images.length)>0))},dependencies:[g.O5,m.rH,z.G,R.jx,h.Pi,y.dz]})}return n})(),q=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=t.oAB({type:n});static \u0275inj=t.cJS({imports:[g.ez,m.Bz.forChild([{path:"",component:P,data:{animation:"ManageStatus"}},{path:"List",component:K,data:{animation:"StatusList"}}]),M.m,u.u5,U.kW,A.EV,D.q4,L._8,h.aw,F.q,J.DL,x.F,Y.Q,I.Qy,w.$,y.kT]})}return n})()}}]);